# Issue: データベース統合テストの実装

## 基本情報

- **Issue Type**: Task
- **Priority**: High
- **Estimated Time**: 2-3日
- **Assignee**: 開発者
- **Labels**: `testing`, `database`, `integration`, `phase-7.5`

## 概要

データベース操作の統合テストを実装し、CRUD操作、マイグレーション、データ整合性を包括的に検証します。

## 現在の状況

- データベース統合テストが不十分
- マイグレーションテストが未実装
- データ整合性のテストが不足

## 実装タスク

### 1. CRUD操作テスト

- [ ] 記事データのCRUD操作テスト
- [ ] カテゴリデータのCRUD操作テスト
- [ ] ユーザーデータのCRUD操作テスト
- [ ] セッションデータのCRUD操作テスト

### 2. データ整合性テスト

- [ ] 外部キー制約の検証
- [ ] 一意制約の検証
- [ ] NOT NULL制約の検証
- [ ] データ型制約の検証

### 3. マイグレーションテスト

- [ ] 最新マイグレーションの実行テスト
- [ ] マイグレーションの冪等性テスト
- [ ] ダウンマイグレーションテスト
- [ ] スキーマ変更の検証

### 4. パフォーマンステスト

- [ ] 大量データでのクエリ性能テスト
- [ ] インデックス効果の検証
- [ ] N+1問題の回避テスト
- [ ] 接続プールの動作テスト

## 完了基準

- [ ] 全テーブルのCRUD操作テスト実装
- [ ] データ整合性の検証テスト実装
- [ ] マイグレーションテストの実装
- [ ] 全テストが通過すること

## 関連ファイル

- `tests/integration/database/**/*.test.ts`
- `src/lib/server/db/schema.ts`
- `src/lib/server/db/migrations/**/*.ts`
- `src/lib/test-utils/database-helpers.ts`

## 影響範囲

- データベース設計
- マイグレーション戦略
- データ整合性
- パフォーマンス

## 備考

- テスト用データベースを分離
- テスト後のクリーンアップ実装
- 並列実行時の分離保証